<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Making a Game (Part 1) - Basic Camera - MonoGame.Extended</title>

    <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon" />
    <link rel="icon" href="../favicon.ico" type="image/x-icon" />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css"
      crossorigin="anonymous"
      integrity="sha256-eSi1q2PG6J7g7ib17yAaWMcrr5GrtohYChqibrV7PBE="
    />
    <meta name="x-stylesheet-fallback-test" content="" class="sr-only" />
    <script>
      !(function (a, b, c, d) {
        var e,
          f = document,
          g = f.getElementsByTagName("SCRIPT"),
          h = g[g.length - 1].previousElementSibling,
          i = f.defaultView && f.defaultView.getComputedStyle ? f.defaultView.getComputedStyle(h) : h.currentStyle;
        if (i && i[a] !== b) for (e = 0; e < c.length; e++) f.write('<link href="http://www.monogameextended.net/posts/' + c[e] + '" ' + d + "/>");
      })(
        "position",
        "absolute",
        ["\/lib\/bootstrap\/dist\/css\/bootstrap.min.css"],
        "rel=\u0022stylesheet\u0022 crossorigin=\u0022anonymous\u0022 integrity=\u0022sha256-eSi1q2PG6J7g7ib17yAaWMcrr5GrtohYChqibrV7PBE=\u0022 "
      );
    </script>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-17371305-8"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "UA-17371305-8");
    </script>

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous" />
    <link rel="stylesheet" href="../css/site.css" />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
    <script>
      hljs.initHighlightingOnLoad();
    </script>
  </head>
  <body>
    <header>
      <div class="container">
        <nav class="navbar navbar-dark navbar-expand-lg navbar-dark mge-primary">
          <a class="navbar-brand" href="../index.html"> <img class="logo" src="../images/monogame-extended-logo.png" alt="MonoGame.Extended" /> MonoGame.Extended </a>
          <button
            class="navbar-toggler"
            type="button"
            data-toggle="collapse"
            data-target=".navbar-collapse"
            aria-controls="navbarSupportedContent"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            *+
            <span class="navbar-toggler-icon"></span>
          </button>

          <div class="collapse navbar-collapse" id="navbarColor02">
            <ul class="navbar-nav ml-auto">
              <li class="nav-item"><a class="nav-link" href="../posts.html">Blog</a></li>
              <li class="nav-item"><a class="nav-link" href="http://docs.monogameextended.net/">Documentation</a></li>
              <li class="nav-item"><a class="nav-link" href="http://community.monogame.net/category/extended">Community</a></li>
              <li class="nav-item"><a class="nav-link" href="https://www.patreon.com/craftworkgames">Patreon</a></li>
              <li class="nav-item"><a class="nav-link" href="https://github.com/craftworkgames/MonoGame.Extended">Github</a></li>
            </ul>
          </div>
        </nav>
      </div>
    </header>

    <div class="container full-height">
      <main role="main" class="pb-3 full-height">
        <div class="row">
          <div class="col-sm-9">
            <div class="content">
              <h1>Making a Game (Part 1) - Basic Camera</h1>
              <small class="text-muted">by Dylan Wilson on 16 May 2019</small>
              <hr />
              <h2>Introduction</h2>
              <p>
                In this series of tutorials I'll be making a game with MonoGame.Extended. Each tutorial will build upon the previous and have an accompanying
                <a href="https://github.com/craftworkgames/MonoGameExtended.Net-Samples">sample on github</a>. The samples are a snapshot of what the code looked like at the end of each tutorial. I
                recommend cloning the samples repository and taking a look at each sample in order to see the evolution of the game.
              </p>
              <p>
                One of the challenges when making a tutorial series like this is finding enough good quality game art that can be used in an open source game project so that everyone can follow along.
              </p>
              <p>
                I've been considering to do a tutorial series like this for years then one day I found the
                <a href="https://www.gamedevmarket.net/asset/pixel-art-adventurer-sprites/?ally=yJRl98tX">pixel art adventurer sprite pack</a> and discovered
                <a href="https://www.patreon.com/elthen">Elthen's Patreon</a> page. If you like Elthen's art, please consider supporting him on Patreon or buying one of his art packs. Without artists
                like him, this series would be almost impossible.
              </p>
              <h2>Let's get started</h2>
              <p>To create the project I'll be using the quick start guide from the <a href="getting-started-with-monogame-extended.html">getting started tutorial</a>.</p>
              <p>
                Once we've got the cornflower blue screen up and running we need to get some sprites on the screen. One of the best ways to prototype your game idea is to start with a static
                background image so that you can get a feel for what it will look like quickly.
              </p>
              <p><img src="making-a-game-part1-basic-camera/background.png" alt="pixel art adventurer background" /></p>
              <p>Then cut out a single sprite as a placeholder for our player sprite and load these textures into the game.</p>
              <p><img src="making-a-game-part1-basic-camera/adventurer.png" alt="pixel art adventurer player sprite" /></p>
              <pre><code class="language-csharp">_background = Content.Load&lt;Texture2D&gt;(&quot;background&quot;);
_adventurer = Content.Load&lt;Texture2D&gt;(&quot;adventurer&quot;);
</code></pre>
              <p>And of course we can render these sprites to with the <code>SpriteBatch</code>.</p>
              <pre><code class="language-csharp">_spriteBatch.Begin(samplerState: SamplerState.PointClamp);
_spriteBatch.Draw(_background, Vector2.Zero, Color.White);
_spriteBatch.Draw(_adventurer, Vector2.Zero, Color.White);
_spriteBatch.End();
</code></pre>
              <p>
                Getting our player sprite moving is a little more involved. For details on how I did this please refer to the
                <a href="https://github.com/craftworkgames/MonoGameExtended.Net-Samples">sample on github</a>.
              </p>
              <h2>Creating the Camera</h2>
              <p><img src="making-a-game-part1-basic-camera/basic-camera-movement.gif" alt="Basic camera movement" /></p>
              <p>
                The first thing I like to implement when I'm starting a new game is a basic camera to get a feel for how things are going to move in the game. Not all games need a camera but it's
                often good to have one in place so that it's easier to add cool effects like <a href="https://www.youtube.com/watch?v=AJdEqssNZ-U">screen shake</a> later on.
              </p>
              <p>
                When you're getting started making a game, it's easy to forget just
                <a href="https://www.gamasutra.com/blogs/ItayKeren/20150511/243083/Scroll_Back_The_Theory_and_Practice_of_Cameras_in_SideScrollers.php">how many different ways</a> camera's can move
                games. In our game, we'll start with a basic position-locking camera that keeps focus on the player position. Then to make it a little more interesting we'll add a little
                lerp-smoothing.
              </p>
              <p>First, add a camera field to your <code>Game</code> class.</p>
              <pre><code class="language-csharp">private OrthographicCamera _camera;
</code></pre>
              <p>In <code>LoadContent</code> or <code>Initialize</code> create the camera and set any initial properties.</p>
              <pre><code class="language-csharp">_camera = new OrthographicCamera(GraphicsDevice) { Zoom = 2.0f };
</code></pre>
              <p>Then apply the camera's transformation matrix to the scene. The simplest way to do this is to pass it into the <code>SpriteBatch.Begin</code> call.</p>
              <pre><code class="language-csharp">_spriteBatch.Begin(transformMatrix: _camera.GetViewMatrix());
</code></pre>
              <h3>Camera Movement</h3>
              <p>The get things moving we can call several methods directly on the camera including <code>Move</code>, <code>Rotate</code>, <code>ZoomIn</code> and <code>ZoomOut</code>.</p>
              <pre><code class="language-csharp">if (keyboardState.IsKeyDown(Keys.R))
    _camera.ZoomIn(elapsedSeconds);

if (keyboardState.IsKeyDown(Keys.F))
    _camera.ZoomOut(elapsedSeconds);
</code></pre>
              <p>However, in our game what we actually want to do is keep the camera focused on our player. For that we can use the <code>LookAt</code> method.</p>
              <pre><code class="language-csharp">_camera.LookAt(_player.Position);
</code></pre>
              <p>Easy enough, but it's a little boring.</p>
              <h3>Lerp-Smoothing</h3>
              <p>There's actually a very easy way to spice things up and make our camera movement more interesting. The trick is to use the <code>Vector2.Lerp</code> function.</p>
              <pre><code class="language-csharp">var cameraCenter = _camera.Position + _camera.Origin;
var lookAtPosition = Vector2.Lerp(cameraCenter, _player.Position, 0.05f);
_camera.LookAt(lookAtPosition);
</code></pre>
              <p>
                What we're doing here telling the camera to look at a point 5% of the way between the camera's center position and the current player position. When we repeat this every frame in our
                <code>Update</code> method the camera will continue to move towards the player until it eventually comes to stop creating a nice smooth movement. It's a simple but effective way to
                achieve smooth movement in all sorts of things in your game.
              </p>

              <hr />
            </div>

            <div id="disqus_thread"></div>
            <script>
              var disqus_config = function () {
                this.page.url = "http://www.monogameextended.net/posts/making-a-game-part1-basic-camera";
                this.page.identifier = "making-a-game-part1-basic-camera";
              };

              (function () {
                // DON'T EDIT BELOW THIS LINE
                var d = document,
                  s = d.createElement("script");
                s.src = "https://monogameextended.disqus.com/embed.js";
                s.setAttribute("data-timestamp", +new Date());
                (d.head || d.body).appendChild(s);
              })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
          </div>
          <div class="col-sm-3 sidebar">
            <div class="card">
              <a href="https://www.gamedevmarket.net/?ally=yJRl98tX" target="_blank">
                <img src="../images/game-dev-market-banner.jpg" alt="gamedevmarket.net" />
              </a>
            </div>
          </div>
        </div>
      </main>
    </div>

    <footer class="border-top footer text-muted">
      <div class="container text-center">
        &copy; 2019 - Craftwork Games
      </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" crossorigin="anonymous" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="></script>
    <script>
      window.jQuery ||
        document.write(
          "\u003Cscript src=\u0022\/lib\/jquery\/dist\/jquery.min.js\u0022 crossorigin=\u0022anonymous\u0022 integrity=\u0022sha256-FgpCb\/KJQlLNfOu91ta32o\/NMZxltwRo8QtmkMRdAu8=\u0022\u003E\u003C\/script\u003E"
        );
    </script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/js/bootstrap.bundle.min.js"
      crossorigin="anonymous"
      integrity="sha256-E/V4cWE4qvAeO5MOhjtGtqDzPndRO1LBk8lJ/PR7CA4="
    ></script>
    <script>
      (window.jQuery && window.jQuery.fn && window.jQuery.fn.modal) ||
        document.write(
          "\u003Cscript src=\u0022\/lib\/bootstrap\/dist\/js\/bootstrap.bundle.min.js\u0022 crossorigin=\u0022anonymous\u0022 integrity=\u0022sha256-E\/V4cWE4qvAeO5MOhjtGtqDzPndRO1LBk8lJ\/PR7CA4=\u0022\u003E\u003C\/script\u003E"
        );
    </script>

    <script src="../js/site.js@v=dLGP40S79Xnx6GqUthRF6NWvjvhQ1nOvdVSwaNcgG18"></script>
  </body>
</html>
